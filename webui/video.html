<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<style>
			body {max-width:800px; margin:10px auto;}
			button {width:50px;}
			.control:hover {cursor:pointer;}

			.current, .full, .arrowSeek {
					border:0px;
					padding:0px;
					width:100px; 
					height:7px; 
					border-radius: 5px; 
					display:inline-block;
					background-color:transparent; 
					position:relative;
			}
			.current, .full {position:absolute;}
			.current {background-color:#3498DB; width:10px;}
			.full {background-color:#DDD;}
		</style>
	</head>
	<body>
		<main>
			<section class="playerSection" style="position:relative;">
				<video width="640" height="480" id="video" controls>
				  <source id="oddPlayer" src="" type="video/mp4">  
				</video>
				<!-- <video id="ww" width="320" height="240" controls style="position:absolute; display:none;">
					<source id="evenPlayer" src="" type="video/mp4">
				</video> -->
			</section>
			<section class="controlSection">
				<button id="btn" class="control">play</button>
				<label>arrowSeek</label>
				<div class="arrowSeek control" id="arrowSeek">
					<span class="full"></span>
					<span class="current"></span>
				</div>
			</section>
		</main>
	</body>
	<script>
		// files resource
		// https://drive.google.com/uc?export=download&id=
		var videos = [];
		var currentIndex = 1;
		videos[0]  = "60 minutes"
		videos[1]  = "10PavN5e6f_K-uZg2bps_SrcSkHXdz_0Z";
		videos[2]  = "1A2H0TzV5QXQWdhXnM1zvB4cV5MZUopZ_";
		videos[3]  = "1sYpx8tmakzrDZNghVGha6rf_NAHEFgrX";
		videos[4]  = "1uow0iSrbFXMsTdvqeWsIB-9RW9cmLTyI";
		videos[5]  = "1gRGMET2NqglLLzJgUP5oYhh27ykDGeUR";
		videos[6]  = "1TFc-Zlk40Ix9oNPkYVrZY-pQLJhBsv5K";
		videos[7]  = "1iEApIOoa57dj-ufKYh-tvqwWxcMvfJOP";
		videos[8]  = "1CilQeUdrfCgEr66-LNKsUap8edMM7ljX";
		videos[9]  = "14HyX9JmF9nmgw7zunuJpqcg3KQV3QYvv";
		videos[10] = "1TG1br4cEc4P0He8uhH9qqI02_YJ1bLF3";

		//seekVideo(1);
		var vvv = document.querySelector("#oddPlayer");
		var vvr = "https://www.dropbox.com/s/uc3vtw4eoz2p00b/family%20video.mp4?dl=1";
		vvr = "https://www.dropbox.com/s/j5hz1ohywyi20hn/streaming.mp4?dl=1";
		var video = document.querySelector("#video");
		vvv.setAttribute("src", vvr);
		video.load();
		video.play();
		function seekVideo(index){
			currentIndex = index;
			if(currentIndex >=10){
				console.log("Moive End.");
				return;
			}
			var odd_even = parseInt(currentIndex % 2);

			var oddPlayer = document.querySelector("#oddPlayer");
			var evenPlayer = document.querySelector("#evenPlayer");

			var path = "https://drive.google.com/uc?export=download&id=";
			var curPath = path + videos[index];
			var prePath = path + videos[index+1];
			
			oddPlayer.setAttribute("src", curPath);
			evenPlayer.setAttribute("src", prePath);

			var video = document.querySelector("#video");
			var ww = document.querySelector("#ww");
	
			if ( video.readyState !== 4 ) {
			    video.load();
			    
			}
			if ( ww.readyState !== 4 ) {
			    ww.load();
			    			    
			}

			if(odd_even == 1){
				video.setAttribute("muted", false);
				video.currentTime = 0;
				video.play();
				//preload		
				ww.load();
				ww.play();
				ww.setAttribute("muted", true);
	
				video.style.display = "block";
			    ww.style.display = "none";
			}
			else{
				ww.setAttribute("muted", false);
				ww.currentTime = 0;
				ww.play();
				//preload
				video.load();
				video.play();
				video.setAttribute("muted", true);

				ww.style.display = "block";
			    video.style.display = "none";		
			}
		}
		var video = document.querySelector("#video");
		video.addEventListener("ended", function(){
			currentIndex = currentIndex +1;
			console.log(currentIndex);
			seekVideo(currentIndex);
		})
		/*var ww = document.querySelector("#ww");
		ww.addEventListener("ended", function(){
			currentIndex = currentIndex +1;
			console.log(currentIndex);
			seekVideo(currentIndex);
		})*/

		var btn = document.querySelector("#btn");
		btn.addEventListener("click", function(){
			var video = document.querySelector("#video");
			if(btn.textContent == "play"){
				btn.textContent = "pause";
				video.play();
			}
			else {
				btn.textContent = "play";	
				video.pause();
			}
		})

		var arrowSeek = document.querySelector("#arrowSeek");
		arrowSeek.addEventListener("click", function(event){
			var e = event;
			var arrowSeek = document.querySelector("#arrowSeek");
			var relX = e.pageX - arrowSeek.offsetLeft;
		    var relY = e.pageY - arrowSeek.offsetTop;
		    
		    var current = document.querySelector(".current");
		    current.style.width = (relX+2) + "px";

		    var count = relX+2;
		    var index = parseInt(count/10);
		    seekVideo(index);
		})
	</script>
</html> 